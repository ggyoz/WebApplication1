@model CSR.Models.Menu

@{
    var indent = (Model.MenuLevel - 1) * 20;
    var marginLeft = $"{indent}px";
}

<tr data-menu-id="@Model.Id" data-parent-id="@Model.ParentId" data-level="@Model.MenuLevel" onclick="editMenu('@Model.Id')" style="cursor:pointer;">
    <td>
        <span style="margin-left: @marginLeft;">
            @if (Model.Children != null && Model.Children.Any())
            {
                <button type="button" class="btn btn-sm btn-link p-0" onclick="event.stopPropagation(); toggleChildren(this, '@Model.Id')" style="text-decoration: none; ">                    
                    <i class="dept1-btn"></i>
                </button>
            }
            else
            {
                <span style="display: inline-block; width: 1.3rem;">
                
                </span> 
            }
            <strong>@Model.Name</strong>
        </span>
    </td>
    <td>
        @if (!string.IsNullOrEmpty(Model.Url))
        {
            <a href="@Model.Url" target="_blank">@Model.Url</a>
        }
        else if (!string.IsNullOrEmpty(Model.Controller) && !string.IsNullOrEmpty(Model.Action))
        {
            <span>@Model.Controller/@Model.Action</span>
        }
        else
        {
            <span class="text-muted">-</span>
        }
    </td>
    <!-- <td>
        <div class="btn-group btn-group-sm">
            <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-sm btn-outline-secondary" title="수정"><i class="bi bi-pencil"></i></a>
            <a asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-sm btn-outline-danger" title="삭제"><i class="bi bi-trash"></i></a>
        </div>
    </td> -->
</tr>

@if (Model.Children != null && Model.Children.Any())
{
    @foreach (var child in Model.Children.OrderBy(c => c.SortOrder))
    {
        @await Html.PartialAsync("_MenuRow", child)
    }
}

